
<html>
<script>
(function () {
    'use strict';

    var SyfaroAPI, MinecraftAPI, baseURL;

    baseURL = 'https://mcapi.us';

    SyfaroAPI = (function () {
        /**
         * @constructor
         */
        function SyfaroAPI() {}

        /**
         * Generates a query string from an object
         * @param  {Object} params params
         * @return {String}        querystring
         */
        SyfaroAPI.prototype.queryString = function (params) {
            var str, p;

            str = [];

            for (p in params) {
                if (params[p] === undefined) {
                    continue;
                }

                if (params.hasOwnProperty(p)) {
                    str.push(encodeURIComponent(p) + '=' + encodeURIComponent(params[p]));
                }
            }

            return '?' + str.join('&');
        };

        /**
         * Runs an XHR request for JSON
         * @param  {String}   endpoint API endpoint
         * @param  {Object}   params   GET params
         * @param  {Function} callback function to call when done
         * @return {undefined}            does not return
         */
        SyfaroAPI.prototype.loadJSON = function (endpoint, params, callback) {
            var xhr, url;

            if (typeof (params) === 'function') {
                callback = params;
                params = {};
            }

            params = this.queryString(params);

            url = baseURL + endpoint + params;

            xhr = new XMLHttpRequest();

            xhr.onerror = function () {
                callback(true);
            };

            xhr.onload = function () {
                var data;

                try {
                    data = JSON.parse(xhr.responseText);
                } catch (e) {
                    return callback(e);
                }

                if (data.status === 'error') {
                    return callback(data.error);
                }

                callback(undefined, data);
            };

            xhr.open('GET', url, true);

            xhr.send();
        };

        return SyfaroAPI;
    }());

    MinecraftAPI = (function () {
        var api;

        /**
         * @constructor
         */
        function MinecraftAPI() {}

        api = new SyfaroAPI();

        /**
         * Gets the status of a Minecraft server
         * @param  {String}   ip       ip or domain of server
         * @param  {Object}   options  extra options, such as port
         * @param  {Function} callback callback function
         * @return {undefined}            does not return
         */
        MinecraftAPI.prototype.getServerStatus = function (ip, options, callback) {
            if (typeof (options) === 'function') {
                callback = options;
                options = {};
            }

            options['ip'] = ip;

            api.loadJSON('/server/status', options, callback);
        };
        MinecraftAPI.prototype['getServerStatus'] = MinecraftAPI.prototype.getServerStatus;

        /**
         * Gets all available query information of a Minecraft server
         * @param  {String}   ip       ip or domain of server
         * @param  {Object}   options  extra options, such as port
         * @param  {Function} callback callback function
         * @return {undefined}            does not return
         */
        MinecraftAPI.prototype.getServerQuery = function (ip, options, callback) {
            if (typeof (options) === 'function') {
                callback = options;
                options = {};
            }

            options['ip'] = ip;

            api.loadJSON('/server/query', options, callback);
        };
        MinecraftAPI.prototype['getServerQuery'] = MinecraftAPI.prototype.getServerQuery;

        return MinecraftAPI;
    }());

    window['MinecraftAPI'] = new MinecraftAPI();
}());

</script>
    <div class="server-status">
      ViflCraft server is currently <span class="server-online"></span>!
    </div>
    <script>
      MinecraftAPI.getServerStatus('play.viflcraft.us.to', {
        port: 25565 // optional, only if you need a custom port
      }, function (err, status) {
        if (err) {
          return document.querySelector('.server-status').innerHTML = 'Error loading status';
        }

        // you can change these to your own message!
        document.querySelector('.server-online').innerHTML = status.online ? 'Online' ;
      });
    </script>


  <head>
    <!-- ... -->
 <script>
	 
	 function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=function(){function n(t){var r=t.ip,i=t.element,o=t.format,a=t.refreshRate;if(e(this,n),o=o||"{online}",a=a||6e4,!r)throw TypeError("ip cannot be null or undefined");if(!i)throw TypeError("element cannot be null or undefined");var u=r.split(":");this.ip=u[0],this.port=u[1]||"25565",this.format=o,this.element="string"==typeof i?document.querySelector(i):i,this.runQuery(),this.timerId=setInterval(this.runQuery.bind(this),a)}return t(n,[{key:"runQuery",value:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var n=JSON.parse(t.responseText);if(null!==e.element.getAttribute("data-playercounter-status"))return void(e.element.innerText=n.online?"online":"offline");n.online&&(e.element.innerHTML=e.format.replace(/{\b(online|max)\b}/gi,function(e,t){return n.players["online"===t?"now":t]}))}},t.open("GET","https://mcapi.us/server/status?ip="+this.ip+"&port="+this.port),t.send()}}]),n}(),r=function(){for(var e=document.querySelectorAll("[data-playercounter-ip]"),t=0;t<e.length;t++){var r=e[t];new n({element:r,ip:r.getAttribute("data-playercounter-ip"),format:r.getAttribute("data-playercounter-format"),refreshRate:r.getAttribute("data-playercounter-refreshRate")})}};"complete"===document.readyState?r():window.onload=r,window.PlayerCounter=n}();
	 
</script>
  </head>
  <body>
    There are <span data-playercounter-ip="play.cubecraft.net">0</span> players online .
	</body>
	
	
	</html>
	  
